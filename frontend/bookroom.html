<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Puki Hotel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <link rel="stylesheet" type="text/css"
        href="//fonts.googleapis.com/css?family=|Roboto+Sans:400,700|Playfair+Display:400,700">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/aos.css">
    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">
    <link rel="stylesheet" href="css/fancybox.min.css">

    <link rel="stylesheet" href="fonts/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="fonts/fontawesome/css/font-awesome.min.css">

    <!-- Theme Style -->
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Styling for room layout */
        .room-card {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #fff;
        }

        .room-card img {
            width: 40%;
            border-radius: 8px;
        }

        .room-card .room-info {
            padding-left: 20px;
        }

        .room-card h3 {
            margin-top: 0;
        }

        .room-card p {
            margin-bottom: 10px;
        }

        .btn-show-rates {
            background-color: #f7c744;
            color: #fff;
            border-radius: 25px;
            padding: 10px 20px;
            text-transform: uppercase;
            font-weight: bold;
        }

        /* Styling for horizontal layout */
        #booking-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #ddd;
        }

        #booking-details .details-container {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        #booking-details .details-container p {
            margin: 0;
            font-size: 16px;
        }

        #booking-details .modify-link {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }

        #booking-details .modify-link:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>

    <header>
        <div class="container-fluid">
            <div class="row align-items-center" style="height: 80px;"> <!-- Adjust height -->
                <!-- Logo Section -->
                <div class="col-6 col-lg-4 site-logo text-center" data-aos="fade">
                    <a href="index.html"
                        style="font-size: 28px; font-weight: bold; text-decoration: none; color: #000;">Puki Hotel</a>
                </div>

                <!-- Toggle Menu Section -->
                <div class="site-menu-toggle js-site-menu-toggle" data-aos="fade" style="margin-top: 15px;">
                    <span style="background-color: #000"></span>
                    <span style="background-color: #000"></span>
                    <span style="background-color: #000"></span>
                </div>

                <!-- Navigation Menu -->
                <div class="site-navbar js-site-navbar" style="display: none;">
                    <nav role="navigation">
                        <div class="container">
                            <div class="row full-height align-items-center">
                                <div class="col-md-6 mx-auto">
                                    <ul class="list-unstyled menu text-center">
                                        <li><a href="index.html">Home</a></li>
                                        <li><a href="rooms.html">Rooms</a></li>
                                        <li><a href="about.html">About</a></li>
                                        <li><a href="events.html">Events</a></li>
                                        <li><a href="checkin.html">Check-In / Check-Out</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
        </div>
    </header>
    <!-- END head -->
    <section class="section bg-light py-5 text-center" data-aos="fade-up" data-aos-delay="100">
        <h2 style="font-weight: bold; font-size: 28px;">Select a Room</h2>
        <p>Choose from our luxurious rooms for your stay at Puki Hotel.</p>
    </section>
    
    <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
        <!-- Left Section -->
        <div class="details-left mt-5">
            <div class="guests">
                <i class="fa fa-user"></i> <span id="guests"></span>
            </div>
            <div class="dates" id="dates"></div>
        </div>
        <a href="index.html" class="modify-link">Modify</a>
    </div>
    
    <section class="section bg-white py-5">
        <div class="container">
        
            <!-- Room Details -->
            <!-- Room 1 -->
            <div class="room-card" data-aos="fade-up">
                <img src="images/img_1.jpg" alt="Single Room" class="img-fluid">
                <div class="room-info">
                    <h3>Single Room</h3>
                    <p>Perfect for solo travelers, equipped with modern amenities.</p>
                    <p><strong>$90 / Night</strong></p>
                    <button id="bookNowButton" class="btn btn-show-rates" 
                            data-amount="1000" 
                            data-currency="USD" 
                            data-description="Single Room Booking">Book Now</button>
                </div>
            </div>
        
            <!-- Room 2 -->
            <div class="room-card" data-aos="fade-up" data-aos-delay="100">
                <img src="images/img_2.jpg" alt="Family Room" class="img-fluid">
                <div class="room-info">
                    <h3>Family Room</h3>
                    <p>Spacious room ideal for families with children.</p>
                    <p><strong>$120 / Night</strong></p>
                    <button id="bookNowButton" class="btn btn-show-rates" 
                            data-amount="12000" 
                            data-currency="USD" 
                            data-description="Family Room Booking">Book Now</button>
                </div>
            </div>
        
            <!-- Room 3 -->
            <div class="room-card" data-aos="fade-up" data-aos-delay="200">
                <img src="images/img_3.jpg" alt="Presidential Suite" class="img-fluid">
                <div class="room-info">
                    <h3>Presidential Suite</h3>
                    <p>A luxurious suite with premium amenities and services.</p>
                    <p><strong>$250 / Night</strong></p>
                    <button id="bookNowButton" class="btn btn-show-rates" 
                            data-amount="25000" 
                            data-currency="USD" 
                            data-description="Presidential Suite Booking">Book Now</button>
                </div>
            </div>
        
        </div>
    </section>
    
    <footer class="section footer-section py-5">
        <div class="container">
            <div class="row mb-4">
                <div class="col-md-3 mb-5">
                    <ul class="list-unstyled link">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Terms &amp; Conditions</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-5">
                    <ul class="list-unstyled link">
                        <li><a href="#">Rooms</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-5 pr-md-5 contact-info">
                    <p><span class="d-block"><span class="ion-ios-location h5 mr-3 text-primary"></span>Address:</span>
                        <span> 304 Orchard Road, Singapore 536203</span>
                    </p>
                    <p><span class="d-block"><span class="ion-ios-telephone h5 mr-3 text-primary"></span>Phone:</span>
                        <span> (+65) 6738 3274</span>
                    </p>
                    <p><span class="d-block"><span class="ion-ios-email h5 mr-3 text-primary"></span>Email:</span>
                        <span> inquiries@pukihotel.com</span>
                    </p>
                </div>
                <div class="col-md-3 mb-5">
                    <p>Sign up for our newsletter</p>
                    <form action="#" class="footer-newsletter">
                        <div class="form-group">
                            <input type="email" class="form-control" placeholder="Email...">
                            <button type="submit" class="btn"><span class="fa fa-paper-plane"></span></button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="row pt-5">
                <p class="col-md-6 text-left">
                    Copyright &copy;
                    <script>document.write(new Date().getFullYear());</script> All rights reserved | This template
                    is made with <i class="icon-heart-o" aria-hidden="true"></i> by Colorlib
                </p>
    
                <p class="col-md-6 text-right social">
                    <a href="#"><span class="fa fa-tripadvisor"></span></a>
                    <a href="#"><span class="fa fa-facebook"></span></a>
                    <a href="#"><span class="fa fa-twitter"></span></a>
                    <a href="#"><span class="fa fa-linkedin"></span></a>
                    <a href="#"><span class="fa fa-vimeo"></span></a>
                </p>
            </div>
        </div>
    </footer>
    
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/jquery-migrate-3.0.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.stellar.min.js"></script>
    <script src="js/jquery.fancybox.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/bootstrap-datepicker.js"></script>
    <script src="js/jquery.timepicker.min.js"></script>
    <!-- <script src="https://js.stripe.com/v3/"></script> -->
    <script src="js/main.js"></script>
    <!-- <script src="js/payment.js"></script> -->
    
    <script>
        document.addEventListener("DOMContentLoaded", () => {
          const buttons = document.querySelectorAll(".btn-show-rates");
      
          buttons.forEach((button) => {
            button.addEventListener("click", () => {
              const roomTypeRaw = button.dataset.description;
              const amount = button.dataset.amount;
      
              // Proper formatting
              const checkIn = localStorage.getItem("checkInDate") || "2025-05-01";
              const checkOut = localStorage.getItem("checkOutDate") || "2025-05-05";
              const fullName = localStorage.getItem("fullName") || "John Doe";
              const email = localStorage.getItem("email") || "john@example.com";
              const phone = localStorage.getItem("phoneNumber") || "91234567";
      
              // Fix room type mapping
              let roomType = "";
              if (roomTypeRaw.includes("Single")) roomType = "Single";
              else if (roomTypeRaw.includes("Family")) roomType = "Family";
              else if (roomTypeRaw.includes("Presidential")) roomType = "PresidentialSuite";
      
              const bookingPayload = {
                check_in: checkIn,
                check_out: checkOut,
                room_type: roomType,
                price: parseFloat(amount) / 100, // Assuming cents
                full_name: fullName,
                email: email,
                phone: phone
              };
      
              console.log("Sending payload:", bookingPayload);
      
              fetch("http://localhost:5013/makebooking", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify(bookingPayload)
              })
                .then(response => response.json())
                .then(data => {
                  console.log("Booking successful:", data);
                  localStorage.setItem("bookingDetails", JSON.stringify(data.data));
                  window.location.href = "bookingconfirmation.html";
                })
                .catch(err => {
                  console.error("Booking error:", err);
                  alert("Something went wrong while booking.");
                });
            });
          });
        });
      </script>
      
      
</body>

</html>